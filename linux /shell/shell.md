# shell 命令

- `#!/bin/sh` 用 `sh` 来执行
- `set -e` 执行过程中遇到错误就停止
- `set --` 将脚本参数 设置成后面的值 `set --  xxxx xx xx`
- `$n` 取第n个参数
    - `${1#-}` : 将第一个参数去掉 `-` 前缀返回，没有`-` 返回原字符串
    - `${1%.conf}` : 将第一个参数去掉 `.conf` 后缀返回，没有`-` 返回原字符串
    - `$0` : 脚本文件 xx.sh
    - `$@` : 所以参数
- `$(xxxx)` : 对执行结果取值; `$(id -u)` : 取用户uid ，id 显示当前用户； uid=0 表示是 root 用户
- `if` : 条件判。 以下判断第一个参数如果包含 `-`前缀 ，就执行命令
```
if [ "${1#-}" != "$1" ]; then
	#xxxx
fi
```
- `exec` : 执行命令
    - `exec su-exec user1` : 使用 `user1` 用户只需
    - `exec "$@"` : 执行所有的参数
- `su -c "${build_command}"` : 切换到root用户执行 build_command 的命令
- `$?` : 上面命令执行的返回结果